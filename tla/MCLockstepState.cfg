\* Model checker configuration for LockstepState.tla (complete protocol model)
\* Usage: ./run_tlc.sh LockstepState

CONSTANT Peer = {p1, p2, p3}
CONSTANT MaxFrame = 2
CONSTANT MaxTerm = 2
CONSTANT MaxEvents = 2
CONSTANT InitialLeader = p1

\* Symmetry reduction - peers are interchangeable (~6x speedup for 3 peers)
SYMMETRY PeerSymmetry

\* Safety invariants - Election
INVARIANT NoTwoLeadersInSameTerm
INVARIANT CandidateVotedForSelf
INVARIANT LeaderVotedForSelf
INVARIANT LeaderHadMajority
INVARIANT VotesFromValidPeers
INVARIANT VotedForValid

\* Safety invariants - Lockstep
INVARIANT FrameBoundedDrift
INVARIANT InputsFromValidPeers

\* Safety invariants - State Sync
INVARIANT SyncTermBounded
INVARIANT LocalEventsPreserved
INVARIANT LeaderUpToDate

\* Safety invariants - Types
INVARIANT TypeInvariant

\* Liveness (optional - slower)
\* PROPERTY EventuallyLeader
\* PROPERTY DesyncEventuallyCorrected

CONSTRAINT MCStateConstraint

CHECK_DEADLOCK FALSE
SPECIFICATION Spec

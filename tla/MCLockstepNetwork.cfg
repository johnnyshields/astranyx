\* Model checker configuration for LockstepNetwork.tla
\* Combined protocol + network model
\* Target: ~20-50M states (10-30 minute run)
\* Usage: ./run_tlc.sh LockstepNetwork

CONSTANT Peer = {p1, p2, p3}
CONSTANT MaxFrame = 2
CONSTANT MaxTerm = 2
CONSTANT MaxEvents = 1
CONSTANT MaxMessages = 20
CONSTANT InitialLeader = p1

\* Symmetry reduction - peers are interchangeable (~6x speedup for 3 peers)
\* NOTE: Disable SYMMETRY if enabling liveness PROPERTY checks below
SYMMETRY PeerSymmetry

\* Safety invariants - Election
INVARIANT NoTwoLeadersInSameTerm
INVARIANT CandidateVotedForSelf
INVARIANT LeaderVotedForSelf
INVARIANT VotedForValid
INVARIANT VotesFromValidPeers
INVARIANT LeaderHadMajority

\* Safety invariants - Lockstep
INVARIANT FrameBoundedDrift
INVARIANT InputsFromValidPeers

\* Safety invariants - State Sync
INVARIANT SyncTermBounded
INVARIANT LocalEventsPreserved
INVARIANT LeaderUpToDate

\* Safety invariants - Network
INVARIANT MessagesValid
INVARIANT NoSelfPartition

\* Safety invariants - Types
INVARIANT TypeInvariant

\* Liveness properties (optional - slower)
\* Uncomment to check progress guarantees:
\* PROPERTY EventuallyLeader
\* PROPERTY DesyncEventuallyCorrected
\* PROPERTY PartitionsEventuallyHeal

CONSTRAINT MCStateConstraint

CHECK_DEADLOCK FALSE
SPECIFICATION Spec

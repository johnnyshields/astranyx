# Astranyx Project Setup

## Overview

Initial project scaffolding for Astranyx, a multiplayer 2.5D shoot-em-up game inspired by R-Type, Einhänder, Gradius, Ikaruga, Radiant Silvergun, and Bruno Simon's WebGL aesthetic.

## Architecture Decisions

### Client Stack
- **Runtime**: Bun (for dev tooling only; browser runs vanilla JS)
- **Build**: Vite 7.x with TypeScript
- **Graphics**: Raw WebGL2 (no framework for full control)
- **Perspective**: 2.5D - side-scrolling gameplay with 3D rendered models

### Server Stack (Planned)
- **Framework**: Elixir Phoenix with Channels
- **Protocol**: WebSockets for multiplayer
- **Architecture**: Authoritative server with client-side prediction

### Why WebSockets over UDP
Phoenix Channels provide:
- Built-in presence tracking and rooms
- Automatic reconnection handling
- Binary protocol support (MessagePack)
- Sufficient latency for shmup gameplay (~50-100ms)

## Files Created

### `/client/`
```
client/
├── index.html              # Game HTML shell
├── package.json            # Bun/Vite config
├── tsconfig.json           # Strict TypeScript config
├── vite.config.ts          # Vite dev server + Phoenix proxy
├── public/assets/          # Static assets (textures, sounds)
└── src/
    ├── main.ts             # Entry point
    ├── core/
    │   ├── Engine.ts       # Game loop with fixed timestep (60Hz)
    │   ├── Input.ts        # Keyboard + gamepad handling
    │   └── Renderer.ts     # WebGL2 renderer with orthographic projection
    ├── game/
    │   ├── Game.ts         # Game state machine + starfield
    │   └── Player.ts       # Player ship with physics and visuals
    └── graphics/
        ├── shaderUtils.ts  # Shader compilation helpers
        └── shaders/
            └── basic.ts    # Vertex + fragment shaders with lighting
```

## Technical Details

### Game Loop
- Fixed timestep at 60Hz for deterministic physics
- Accumulator pattern with interpolation for smooth rendering
- Capped accumulator prevents "spiral of death"

### Rendering Pipeline
- Orthographic projection (600 units viewport height)
- Depth testing enabled for 2.5D layering
- Basic diffuse + rim lighting in fragment shader
- Alpha blending for transparency/glow effects

### Input System
- WASD/Arrow keys for movement
- Space for fire (hold to charge)
- Shift for special weapon
- Gamepad support with dead zones

### Player Ship
- Acceleration-based movement with friction
- Visual tilt based on vertical velocity
- Engine exhaust with dynamic glow
- Charge shot mechanic (hold fire button)

## Running the Client

```bash
cd client
bun install
bun run dev
```

Opens at http://localhost:3000

## Next Steps

1. Install Elixir and create Phoenix server
2. Set up Phoenix Channels for game rooms
3. Connect client to server via WebSocket
4. Implement entity synchronization
5. Add enemies and bullets
6. Create procedural 3D ship models

## Design References

- **R-Type**: Force pod system, horizontal scrolling
- **Einhänder**: 2.5D aesthetic, weapon pickups that attach to ship
- **Gradius**: Option drones, power-up bar system
- **Ikaruga**: Polarity switching, chain combos
- **Radiant Silvergun**: Weapon chaining, scoring depth
- **Bruno Simon**: Polished WebGL visuals, playful 3D aesthetic
